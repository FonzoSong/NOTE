>[!NOTE] Memcached
>是一种高性能、分布式的内存对象缓存系统，常用于加速动态Web应用程序，通过减少数据库负载来提升响应速度。为了更好地理解memcached，我们可以将其类比为一个图书馆中的图书管理员和书籍储存过程。

### 基本概念

1. **缓存（Cache）**
    
    - **类比**：图书馆中的快速访问书架
    - **解释**：缓存是一种存储机制，用来快速访问常用的数据，而不必每次都从慢速的数据源（比如数据库）读取。
2. **内存（Memory）**
    
    - **类比**：图书馆中的临时书架
    - **解释**：内存是计算机中快速但相对短暂的存储空间，用于存储当前需要快速访问的数据。
3. **分布式（Distributed）**
    
    - **类比**：多层图书馆中的多个图书管理员
    - **解释**：分布式系统指的是通过多个节点（服务器）共同完成任务，以提高系统的可扩展性和可靠性。

### 工作原理

1. **存储数据（Storing Data）**
    
    - **类比**：图书管理员将常用书籍放在快速访问书架上
    - **解释**：当应用程序需要存储数据时，它将数据发送到memcached服务器，服务器将数据保存在内存中，并分配一个唯一的键（key）来标识数据。
2. **检索数据（Retrieving Data）**
    
    - **类比**：读者向图书管理员请求某本书时，管理员首先检查快速访问书架
    - **解释**：当应用程序需要访问数据时，它使用对应的键向memcached服务器请求数据。如果数据在缓存中（命中），服务器会立即返回数据；如果数据不在缓存中（未命中），则应用程序需要从慢速的数据源读取数据。
3. **缓存失效（Cache Eviction）**
    
    - **类比**：当快速访问书架空间不足时，图书管理员需要移除一些书来腾出空间
    - **解释**：当缓存空间不足时，memcached会根据一定的策略（如LRU - 最近最少使用）移除一些旧数据来腾出空间给新的数据。

### 使用场景

1. **加速数据库查询**
    
    - **类比**：图书管理员提前将热门书籍放在快速访问书架上，以减少读者查找的时间
    - **解释**：对于一些频繁访问的数据，将其缓存在memcached中，可以减少数据库的查询负载，从而提高响应速度。

1. **会话存储**
    
    - **类比**：图书管理员记录每个读者的借阅记录
    - **解释**：在Web应用中，用户会话数据可以存储在memcached中，以便在多个服务器之间共享会话信息。

### 部署

部署环境配置:
[[Init]]
```

```shell
wget http://memcached.org/latest
tar -zxvf memcached-1.x.x.tar.gz
cd memcached-1.x.x
./configure && make && make test && sudo make install
```

### 深入理解

为了更深入地理解memcached，我们需要了解以下技术概念：

1. **哈希（Hashing）**
    - 哈希函数用于将键映射到特定的缓存位置。

1. **LRU（Least Recently Used）算法**
    - 一种缓存替换策略，用于移除最近最少使用的数据，以腾出空间存储新的数据。

1. **分布式哈希表（DHT）**
    - 一种分布式系统中常用的数据结构，用于在多个节点之间有效地存储和检索数据。

### [[O&M/Server/memcached/常见问题|常见问题与解决方式]]